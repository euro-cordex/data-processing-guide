<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Quick Start Guide &#8212; REMO Documentation and User Guide 0 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.12.4.min.js "></script>
<script type="text/javascript" src="_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="_static/bootstrap-3.4.1/js/bootstrap.min.js "></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html"><span><img src="_static/REMO_logo.png"></span>
          REMO</a>
        <span class="navbar-text navbar-version pull-left"><b>2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="http://remo-rcm.de">Homepage</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="syntax-examples.html">1. Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="syntax-examples.html#headings">1.1. Headings</a></li>
<li class="toctree-l2"><a class="reference internal" href="syntax-examples.html#code">1.2. Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="syntax-examples.html#admonitions">1.3. Admonitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="syntax-examples.html#footnotes">1.4. Footnotes</a></li>
<li class="toctree-l2"><a class="reference internal" href="syntax-examples.html#icons">1.5. Icons</a></li>
<li class="toctree-l2"><a class="reference internal" href="syntax-examples.html#tables">1.6. Tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="syntax-examples.html#code-documentation">1.7. Code Documentation</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Quick Start Guide</a><ul>
<li><a class="reference internal" href="#compilation-of-the-model-code">Compilation of the Model Code</a></li>
<li><a class="reference internal" href="#setup-of-the-run-directory">Setup of the Run Directory</a><ul>
<li><a class="reference internal" href="#input-data">Input Data</a></li>
<li><a class="reference internal" href="#run-script">Run Script</a></li>
</ul>
</li>
<li><a class="reference internal" href="#execution-of-the-run-script">Execution of the Run Script</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/tutorial_run.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="quick-start-guide">
<h1>Quick Start Guide<a class="headerlink" href="#quick-start-guide" title="Permalink to this headline">¶</a></h1>
<div class="line-block">
<div class="line">This chapter describes how to set up and run a simple test experiment
with REMO. Usually, a resaonable model run with REMO requires a lot of
careful preparation of boundary forcing data, a soil library, run and
batch scripts, etc. But to use REMO, it is most important to get a
feeling for how a model run works in general in order to get
understand what input data is required and what data REMO produces.
For this purpose, a test setup is available which can be used without
much preparation and should lead to quick results. This chapter
explains in detail how to run this test setup. For a more detailled
explanation of the REMO model workflow, experiment design and
preprocessing, please have a look at chapters.</div>
<div class="line">It is usally recommeded to execute REMO in parallel although you
should also be albe to run this test setup on a laptop. In this guide,
we will show how to run REMO in parallel on the supercomputer MISTRAL
at DKRZ which means you will need to have a valid user account and be
associated to a project ID so that the DKRZ can account properly for
your computing time. However, if you don’t have access to the MISTRAL,
you can still run this setup on your laptop. In this case, this guide
should also lead you to success.</div>
</div>
<div class="section" id="compilation-of-the-model-code">
<h2>Compilation of the Model Code<a class="headerlink" href="#compilation-of-the-model-code" title="Permalink to this headline">¶</a></h2>
<p>REMO is a regional climate model written in Fortran and when you have
obtained the code, the directory structure of the model in
<code class="docutils literal notranslate"><span class="pre">ModelRun/REMO_MPI</span></code> should more or less look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">build</span>  <span class="c1"># makefiles</span>
<span class="o">/</span><span class="n">CBS</span>    <span class="c1"># module source code</span>
<span class="o">/</span><span class="n">CODE</span>   <span class="c1"># source code</span>
<span class="o">/</span><span class="n">jobs</span>   <span class="c1"># job scripts</span>
<span class="o">/</span><span class="n">libs</span>   <span class="c1"># executable</span>
<span class="o">/</span><span class="n">OFS</span>    <span class="c1"># object directory for compiling</span>
</pre></div>
</div>
<p>You will have to compile the source code yourself on the machine you
will execute the run. Go to the <code class="docutils literal notranslate"><span class="pre">/build</span></code> directory in which you will
find a Makefile to create a machine specific makefile. There is also
another subdirectory you don’t have to care about right now. In the
<code class="docutils literal notranslate"><span class="pre">/build</span></code> directory try to type the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make
</pre></div>
</div>
<p>which should result in a similar output to this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>usage: &lt;make clean&gt; &lt;make clean_all&gt; &lt;make mistral&gt; &lt;make blizzard&gt; &lt;make tornado&gt; &lt;make ubuntu_laptop&gt; &lt;make meteo&gt; &lt;make bull&gt; &lt;make juropa&gt;
</pre></div>
</div>
<p>The only purpose of the makefile here is to create a machine specific
makefile from some files in the subdirectory /makefiles. There are some
predefined makefile configurations for different machines but, in
general, they only differ in which fortran compiler or mpi
implementation is used. So if you are working on an ubuntu system, try
typing:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make ubuntu_laptop
</pre></div>
</div>
<p>which means nothing else than using the gnu fortran compiler <em>gfortran</em>
with the open mpi implementation which both are usually available on the
ubuntu distribution. However, if this fails, you can adapt the makefile
template for a linux machine to your configuration by editing the file
Makefile_ubuntu_laptop.txt in /makefiles/templates. If you are lucky
to have a valid account on the MISTRAL supercomputer of the DKRZ in
Hamburg, you can simply type:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make mistral
</pre></div>
</div>
<p>which should work if your environment matches the DKRZ recommendations.
Again, this only means that remo is compiled on an intel machine using
the intel fortran compiler (ifort) with a bullxmpi implementation of
mpif90. This means that you should have loaded the following modules,
e.g, by adding this line your shell or bash profile:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use the default versions of Intel compiler and Bullx MPI with Mellanox MXM and FCA tools</span>
module load intel mxm fca bullxmpi_mlx
</pre></div>
</div>
<p>We highly recommend that you have a look at the MISTRAL documentation on
the homepage of DKRZ.</p>
</div>
<div class="section" id="setup-of-the-run-directory">
<h2>Setup of the Run Directory<a class="headerlink" href="#setup-of-the-run-directory" title="Permalink to this headline">¶</a></h2>
<p>It is recommended not to execute the run in the model code directory
itself but to create an additional run directory since REMO will create
a lot of output data. On the MISTRAL (like on any other supercomputer),
this should be on the WORK partition which you find at <code class="docutils literal notranslate"><span class="pre">/work</span></code> on
MISTRAL. To execute the run on MISTRAL, you need to be associated to a
project account so that the DKRZ can account for your computing time. If
you have an account on MISTRAL, you usually should be associated to at
least one project. You can then find you personal WORK directory at:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/work/YOUR_PROJECT_ID/YOUR_USER_ID
</pre></div>
</div>
<div class="line-block">
<div class="line">where you should have the tutorial data available. If you run the
tutorial setup on your laptop, you might want to create a run
directory at any aritrary place where you have a couple of gigabytes
to catch the remo output data.</div>
</div>
<div class="section" id="input-data">
<h3>Input Data<a class="headerlink" href="#input-data" title="Permalink to this headline">¶</a></h3>
<p>However, the first thing you need is the input data for REMO. If you are
using the tutorial data on MISTRAL, you will find a directory called
<code class="docutils literal notranslate"><span class="pre">/data</span></code> in your <code class="docutils literal notranslate"><span class="pre">/ModelRun</span></code> directory which has the following
structure:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>data/libs: <span class="c1"># soil data</span>
  albyear_cordex044.srv  GHG_rcp45_1850-2101.txt  <span class="nb">test</span>  vgryear_cordex044.srv  vltyear_cordex044.srv
data/xa    <span class="c1"># forcing data</span>
  a051000a1990010100 a051000a1990010106 a051000a1990010112 ...
</pre></div>
</div>
<div class="line-block">
<div class="line">This is the main input data REMO requires to start and run a
simulation. The <code class="docutils literal notranslate"><span class="pre">/libs</span></code> directory contains data of the so-called
’soil library’. This includes monthly data of the soil albedo,
vegetation, etc. The second directory <code class="docutils literal notranslate"><span class="pre">/xa</span></code> contains the forcing
data in a 6-hourly resolution. Each file contains all data that is
required by REMO to setup the <em>lateral boundary conditions</em> for a
certain timestep during the simulation. This is necessary, since REMO
is a <em>regional</em> model. It does not model the entire globe and
consequently, it will need some boundary conditions derived from a
global data set. This is exactly what the <code class="docutils literal notranslate"><span class="pre">/xa</span></code> directory contains.
By the way, the timestep of the REMO run can, of course, be much
shorter than the 6-hourly resolution of the forcing data. For the
timesteps in between two forcing files, REMO will interpolate the
boundary data from two consecutive forcing files.</div>
<div class="line">The forcing files (also often called ’a-files’) satisfy a certain
naming convention which is in this case <code class="docutils literal notranslate"><span class="pre">a051000aYYYYMMDDHH</span></code> and
where <code class="docutils literal notranslate"><span class="pre">YYYYMMDDHH</span></code> denotes the date in time of the forcing data in
UTC format. Consquently, the forcing data for the test setup reaches
from the 1st of January 1990 at 00:00 UTC to the 31st at 24:00 UTC
(which is, in fact, the 1st of February at 00:00 UTC). The first part
of the forcing file name contains some information on how the data was
created, see, e.g., [appendix]. Although the forcing files are only
needed to setup boundary conditions during the run, they actually
contain data for the whole computational domain. The reason for this
is that REMO also and only reads the <em>initial conditions</em> from the
forcing file when the simulation starts.</div>
<div class="line">Again, don’t worry about the details right now since the data is
already setup for you and will work for the test setup.</div>
</div>
</div>
<div class="section" id="run-script">
<h3>Run Script<a class="headerlink" href="#run-script" title="Permalink to this headline">¶</a></h3>
<p>Now that we have created the run directory and prepared the boundary
data, you can now modify the example run script. It is called
test_remo.ksh and you find it in the run directory at:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ModelRun</span><span class="o">/</span><span class="n">test_remo</span><span class="o">.</span><span class="n">ksh</span>
</pre></div>
</div>
<p>The example run script is a kshell script and its purpose is simply to</p>
<ol class="arabic simple">
<li>setup a directory structure for the REMO output data</li>
<li>create an <code class="docutils literal notranslate"><span class="pre">INPUT</span></code> file containing a namelist for REMO</li>
<li>execute REMO</li>
</ol>
<p>The run script is actually a batch script containing a header for the
Slurm Workload Manager that is used on MISTRAL. The header contains all
necessary information to submit the run script as a batch job to the
queuing system on MISTRAL and it looks like this:</p>
<div class="line-block">
<div class="line">What you can read from this information is, e.g., that we will run the
test setup on two nodes on MISTRAL where each node can handle 24 MPI
tasks. This means that we will have 48 processors in total to run the
setup in parallel. The Slurm header is required when you submit the
run script to the MISTRAL, if you want to run the test locally on your
laptop, you can ignore it.</div>
<div class="line">However, when you run REMO in parallel you have to tell it how to
decompose the computational domain for parallel computation. This is
defined by the Parameters PROCX and PROCY which describe the number of
subdomains in the x-direction and y-directions. Make sure that these
parameters are set in the run script:</div>
</div>
<div class="line-block">
<div class="line">The important point here is that the number of subdomains matches the
total number of MPI processes you plan to run the setup with, e.g., 48
processes in this example, one MPI process for each subdomain. If you
want to know more about the domain decomposition, please refer to the
REMO Documentation.</div>
<div class="line">Now, you have to set a parameter concerning the system on which you
run the test.</div>
</div>
<p>Choosing the right system will only take care of which command will be
used to execute remo (e.g., mpirun or srun).</p>
<p>Next, you have to make sure that you set the right directory path for
the model and run directory:</p>
<div class="line-block">
<div class="line">Here, we use the environment variable <code class="docutils literal notranslate"><span class="pre">$PWD</span></code> since this should
simply set the directory structure according to your current run
directory. The <code class="docutils literal notranslate"><span class="pre">BASEDIR</span></code> denotes the run directory (e.g, where the
<code class="docutils literal notranslate"><span class="pre">/data</span></code> subdirectory is located) and <code class="docutils literal notranslate"><span class="pre">MODELDIR</span></code> is the root
directory of the REMO Code.</div>
<div class="line">Finally, you can choose the length of the run.</div>
</div>
<div class="line-block">
<div class="line">Let us do a short run for the beginning. This means that the run will
only last for one hour of simulation time.</div>
<div class="line">There are many more parameters in the run script you don’t have to
care about right now since they should be ready to run on MISTRAL or
your linux laptop. If you are a little familiar with shell scripting,
you will recognize that the script parameters are used to create a
file called <code class="docutils literal notranslate"><span class="pre">INPUT</span></code> which contains a Fortran NAMELIST which, amongst
other things, tells REMO about where the boundary data is located,
where it should write output data, the resolution of the domain, the
timestep, start and end point of the simulation, etc… (for more
details, see Appendix [app:namelist]). At the same time, the run
script creates the appropriate file structure for REMO to write its
output data to. The rest of the run script deals executing REMO.</div>
<div class="line">The idea of the run script is to make things as easy and flexible as
possible. E.g., if you want to run a climate simulation over sevaral
decades, you will need thousands or even millions of cpu hours to
complete the run. You will never be able to complete this simulation
in one go since all supercomputing centers forbid to submit jobs with
more than a couple of hours of computing time (or ’wallclock time’).
What is usually done is to compute one month of simulation time per
batch job and then, after this job was finished, <em>restart</em> the
simulation with the next month. Using a job script will allow to
dynamically setup a REMO and even submit a batch job for the following
month, when one month of computation was finished. However, when you
want to design your own experiment in the future, you will probably
create your own run script in your favourite scripting language which
deals with setting up the REMO simulation. Anyway, our test script
might be a good starting point for this.</div>
</div>
</div>
</div>
<div class="section" id="execution-of-the-run-script">
<h2>Execution of the Run Script<a class="headerlink" href="#execution-of-the-run-script" title="Permalink to this headline">¶</a></h2>
<p>You should now be able to execute the batch script by either submitting
it to the job queue on MISTRAL:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sbatch test_remo.ksh
</pre></div>
</div>
<p>or by executing it directly on your laptop by typing:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ksh test_remo.ksh
</pre></div>
</div>
<p>If you submitted the batch job script to the MISTRAL scheduler, you can
check your job status using the <code class="docutils literal notranslate"><span class="pre">squeue</span></code> command, e.g.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>squeue -u <span class="se">\$</span>USER
</pre></div>
</div>
<p>If the script is executed successfully it should create a subdirectory
called <code class="docutils literal notranslate"><span class="pre">test</span></code> in your data folder of your run directory. The structure
of this output directory should look similar to this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/data/test :
/xe    <span class="c1"># results with hourly resolution</span>
/xf    <span class="c1"># restart files</span>
/xt    <span class="c1"># results with 6-hourly resolution</span>
</pre></div>
</div>
<p>You will also find a batch log file (something like <code class="docutils literal notranslate"><span class="pre">slurm-....out</span></code>)
in your run directory which will contain the output of the the run
script and the REMO log. If REMO was launched successfully, you can see
that REMO starts by creating output files in the <code class="docutils literal notranslate"><span class="pre">/data/test/</span></code>
directory. If this is finished, REMO starts reading input from the
<code class="docutils literal notranslate"><span class="pre">/data</span></code> directory e.g.:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>OPEN:   remo_test/data/xa/a051000a1990010100
OPEN:   remo_test/data/xa/a051000a1990010106
OPEN:   remo_test/data/libs/vltyear_cordex044.srv
OPEN:   remo_test/data/libs/albyear_cordex044.srv
OPEN:   remo_test/data/libs/GHG_rcp45_1850-2101.txt
</pre></div>
</div>
<p>You can see, that REMO, in fact, reads in the soil library data and also
the first two boundary forcing files. REMO will then fill all necessary
initial conditions and will be able to compute boundary conditions for
the first six hours of simulation time. Since we chose the short run
with only one hour of simulation time, look for some a line that gives
information on the simulation progress, e.g.,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">FORECASTTIME</span>  <span class="o">=</span> <span class="m">00000001</span> HOURS
</pre></div>
</div>
<div class="line-block">
<div class="line">which will let you know that REMO started successfully has calculated
the first hour of simulation time. The run should then have stopped.</div>
<div class="line">If everything worked fine, you can have revisit the results directory
in /data/test and have a look at the results:</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/data/test :
  /xe   <span class="c1"># results with hourly resolution</span>
     e031001e_c001_199001  e031001e_c002_199001  e031001e_c003_199001  e031001e_c004_199001 ...
  /xf   <span class="c1"># restart files</span>
  /xt   <span class="c1"># results with 6-hourly resolution</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">The subdirectory /xe contains the main results.</div>
<div class="line">The naming convention here is <code class="docutils literal notranslate"><span class="pre">e031001e_cCCC_YYYYMM</span></code> (“e” =
“Ergebnis” = result). Each file contains a single 2D field, usually in
hourly resolution (hourly means) and organised by a code (3-digit code
number <code class="docutils literal notranslate"><span class="pre">CCC</span></code>, see Appendix [app:codelist]). The files are stored in
the binary IEG Format (see also Appendix [app:ieg]) and can be read
using the Climate Data Operators (CDO). If you are working on MISTRAL
(or have cdo installed yourself), go to the results directory
/data/test/xe and try, e.g.:</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cdo sinfo e031001e_c167_199001
</pre></div>
</div>
<p>and you should get something like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span> File format : IEG  BIGENDIAN
  -1 : Institut Source   Ttype    Levels Num    Points Num Dtype : Parameter ID
   <span class="m">1</span> : unknown  unknown  instant       <span class="m">1</span>   <span class="m">1</span>     <span class="m">15609</span>   <span class="m">1</span>  F32  : <span class="m">167</span>.128
 Grid coordinates :
   <span class="m">1</span> : lonlat                   : <span class="nv">points</span><span class="o">=</span><span class="m">15609</span> <span class="o">(</span>129x121<span class="o">)</span>
                           rlon : -31.73 to <span class="m">24</span>.59 by <span class="m">0</span>.44 degrees
                           rlat : -26.73 to <span class="m">26</span>.07 by <span class="m">0</span>.44 degrees
                      northpole : <span class="nv">lon</span><span class="o">=</span>-162  <span class="nv">lat</span><span class="o">=</span><span class="m">39</span>.25
 Vertical coordinates :
   <span class="m">1</span> : height                   : <span class="nv">levels</span><span class="o">=</span><span class="m">1</span>
                         height : <span class="m">2</span> m
 Time coordinate :  <span class="m">1</span> step
YYYY-MM-DD hh:mm:ss  YYYY-MM-DD hh:mm:ss  YYYY-MM-DD hh:mm:ss  YYYY-MM-DD hh:mm:ss
<span class="m">1990</span>-01-01 <span class="m">01</span>:00:00
</pre></div>
</div>
<p>The header of the file contains some important information on:</p>
<ul class="simple">
<li>the file format (e.g., IEG)</li>
<li>field information and dimension</li>
<li>the grid</li>
<li>the time axis</li>
</ul>
<div class="line-block">
<div class="line">You can see that this file contains only one field (code 167) of
resolution 129x121 with one level at a height of 2m (it’s actually the
2m air temperature). Notice that this file only contains one timestep
at the 1st of January 1990 at 1 hour after midnight (the format of
time here is hours:minutes:seconds). Notice that there are more files
with the naming convention <code class="docutils literal notranslate"><span class="pre">e031001n_cCCC_YYYYMM</span></code> (so called
’n-files’) which are supposed to contain daily means of a 2D field.
These are empty right now since we only computed one hour and
consquently didn’t produce enough data for at least one day.
Furthermore, the other result directory <code class="docutils literal notranslate"><span class="pre">/xt</span></code> is empty as well since
this will contain REMO data in 6-hourly resolution.</div>
<div class="line">Now let’s start this run again from the beginning but this time, we
will compute a whole month. Set the parameter for the simulation
lenght in the run script like this:</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">TEST</span><span class="o">=</span><span class="m">2</span>      <span class="c1"># Number of the test</span>
            <span class="c1"># 1: Short</span>
            <span class="c1"># 2: Long</span>
            <span class="c1"># 3: Restart</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">If you look carefully at the run script you will see that this will
set a parameter <code class="docutils literal notranslate"><span class="pre">KSE=744</span></code> which is then fed into the <code class="docutils literal notranslate"><span class="pre">NAMELIST</span></code>
file. This denotes the last hour of simulation time at which the run
will stop, consequently, we will now run the simulation for the whole
January of 1990 (31 days x 24 hours/day = 744 hours).</div>
<div class="line">Now restart the simulation with:</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sbatch test_remo.ksh
</pre></div>
</div>
<p>or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ksh test_remo.ksh
</pre></div>
</div>
<p>respectively. This will take some more time (about 10 minutes on Mistral
with 48 processors), and if you have a look at the log file (use, e.g.,
<code class="docutils literal notranslate"><span class="pre">tail</span> <span class="pre">-n</span> <span class="pre">100</span> <span class="pre">-f</span> <span class="pre">slurm-....out</span></code> for continous update of the output),
you can follow the progress in hourly steps,e.g.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">FORECASTTIME</span>  <span class="o">=</span> <span class="m">00000001</span> HOURS
<span class="nv">FORECASTTIME</span>  <span class="o">=</span> <span class="m">00000002</span> HOURS
<span class="nv">FORECASTTIME</span>  <span class="o">=</span> <span class="m">00000003</span> HOURS
<span class="nv">FORECASTTIME</span>  <span class="o">=</span> <span class="m">00000004</span> HOURS
<span class="nv">FORECASTTIME</span>  <span class="o">=</span> <span class="m">00000005</span> HOURS
SAVE:   remo_test/data/test20/xt/e031001t1990010106
<span class="nv">FORECASTTIME</span>  <span class="o">=</span> <span class="m">00000006</span> HOURS
OPEN:   remo_test/data/xa/a051000a1990010112
<span class="nv">FORECASTTIME</span>  <span class="o">=</span> <span class="m">00000007</span> HOURS
<span class="nv">FORECASTTIME</span>  <span class="o">=</span> <span class="m">00000008</span> HOURS
<span class="nv">FORECASTTIME</span>  <span class="o">=</span> <span class="m">00000009</span> HOURS
<span class="nv">FORECASTTIME</span>  <span class="o">=</span> <span class="m">00000010</span> HOURS
<span class="nv">FORECASTTIME</span>  <span class="o">=</span> <span class="m">00000011</span> HOURS
SAVE:   remo_test/data/test20/xt/e031001t1990010112
<span class="nv">FORECASTTIME</span>  <span class="o">=</span> <span class="m">00000012</span> HOURS
OPEN:   remo_test/data/xa/a051000a1990010118
<span class="nv">FORECASTTIME</span>  <span class="o">=</span> <span class="m">00000013</span> HOURS
<span class="nv">FORECASTTIME</span>  <span class="o">=</span> <span class="m">00000014</span> HOURS
</pre></div>
</div>
<div class="line-block">
<div class="line">You can see here that at 6 hours (at the end of the 5th hour), a file
with the naming conenvtion ’e031001tYYYYMMDDHH’ is created (the so
called ’t-files’). These files contains results for a number of 2D
surface fields and for the 3D atmospheric fields and are organised by
time, one file every 6 hours. Among other purposes, the t-files are
used for computing the forcing for finer-resolution REMO experiments.</div>
<div class="line">Now let’s have a look in the log file after the run has fininshed at
744 hours:</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">FORECASTTIME</span>  <span class="o">=</span> <span class="m">00000740</span> HOURS
<span class="nv">FORECASTTIME</span>  <span class="o">=</span> <span class="m">00000741</span> HOURS
<span class="nv">FORECASTTIME</span>  <span class="o">=</span> <span class="m">00000742</span> HOURS
<span class="nv">FORECASTTIME</span>  <span class="o">=</span> <span class="m">00000743</span> HOURS
SAVE:   remo_test/data/test20/xe/e031001m199001
SAVE:   remo_test/data/test20/xe/e031001s199001
SAVE:   remo_test/data/test20/xt/e031001t1990020100
SAVE:   remo_test/data/test20/xf/e031001f1990020100
SAVE:   remo_test/data/test20/xf/e031001g1990020100
<span class="nv">FORECASTTIME</span>  <span class="o">=</span> <span class="m">00000744</span> HOURS
</pre></div>
</div>
<p>You can see that at the end of the month, several new files are created:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">e031001mYYYYMM</span></code>: monthly means (m-file)</li>
<li><code class="docutils literal notranslate"><span class="pre">e031001sYYYYMM</span></code>: monthly standard deviations (s-file)</li>
<li><code class="docutils literal notranslate"><span class="pre">e031001fYYYYMMDDHH</span></code>: contains restart data (f-file) at timestep
n-2</li>
<li><code class="docutils literal notranslate"><span class="pre">e031001gYYYYMMDDHH</span></code>: contains restart data (g-file) at timestep
n-1</li>
</ul>
<div class="line-block">
<div class="line">The m- and s-files contain monthly mean values and standard deviations
respectively of the most important 2D fields. That why they are saved
only at the end of the month. The f- and g-files contain REMO’s
restart data, i.e. the prognostic fields at the last two time steps of
the month. They are written at the end of each month’s calculation and
can be use for initialisation to restart the model at the beginning of
the next month.</div>
<div class="line">You can go on and explore all these result data using cdo. You can
also use cdo to convert an IEG file to the NETCDF format and then
explore it using ncdump, e.g., like this:</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cdo -t remo -f nc copy e031001e_c167_199001 e031001e_c167_199001.nc
ncdump -h e031001e_c167_199001.nc
</pre></div>
</div>
<p>which will give you file information in the cdl format:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>netcdf e031001e_c167_199001 <span class="o">{</span>
dimensions:
        <span class="nv">rlon</span> <span class="o">=</span> <span class="m">129</span> <span class="p">;</span>
        <span class="nv">rlat</span> <span class="o">=</span> <span class="m">121</span> <span class="p">;</span>
        <span class="nv">height</span> <span class="o">=</span> <span class="m">1</span> <span class="p">;</span>
        <span class="nb">time</span> <span class="o">=</span> UNLIMITED <span class="p">;</span> // <span class="o">(</span><span class="m">744</span> currently<span class="o">)</span>
variables:
        ..
        double height<span class="o">(</span>height<span class="o">)</span> <span class="p">;</span>
                height:standard_name <span class="o">=</span> <span class="s2">&quot;height&quot;</span> <span class="p">;</span>
                height:long_name <span class="o">=</span> <span class="s2">&quot;height&quot;</span> <span class="p">;</span>
                height:units <span class="o">=</span> <span class="s2">&quot;m&quot;</span> <span class="p">;</span>
                height:positive <span class="o">=</span> <span class="s2">&quot;up&quot;</span> <span class="p">;</span>
                height:axis <span class="o">=</span> <span class="s2">&quot;Z&quot;</span> <span class="p">;</span>
        double time<span class="o">(</span><span class="nb">time</span><span class="o">)</span> <span class="p">;</span>
                time:standard_name <span class="o">=</span> <span class="s2">&quot;time&quot;</span> <span class="p">;</span>
                time:units <span class="o">=</span> <span class="s2">&quot;day as %Y%m%d.%f&quot;</span> <span class="p">;</span>
                time:calendar <span class="o">=</span> <span class="s2">&quot;proleptic_gregorian&quot;</span> <span class="p">;</span>
        float TEMP2<span class="o">(</span>time, height, rlat, rlon<span class="o">)</span> <span class="p">;</span>
                TEMP2:long_name <span class="o">=</span> <span class="s2">&quot;2m temperature&quot;</span> <span class="p">;</span>
                TEMP2:units <span class="o">=</span> <span class="s2">&quot;K&quot;</span> <span class="p">;</span>
                TEMP2:code <span class="o">=</span> <span class="m">167</span> <span class="p">;</span>
                TEMP2:table <span class="o">=</span> <span class="m">128</span> <span class="p">;</span>
                TEMP2:grid_mapping <span class="o">=</span> <span class="s2">&quot;rotated_pole&quot;</span> <span class="p">;</span>
        ..
</pre></div>
</div>
<p>During the conversion to <code class="docutils literal notranslate"><span class="pre">NetCDF</span></code>, the file information was connected
to a REMO code table which will give some more intuitive information on
the file content. Notice that the e-file now contains 744 timesteps, one
for each hour of the month. You can now go on and have a closer look at
the other result files and maybe use <code class="docutils literal notranslate"><span class="pre">ncview</span></code> (use the command
<code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">load</span> <span class="pre">ncview</span></code> on MISTRAL) to create a quick plot and get a
feeling for how the output data is organized.</p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2019, Lars Buntemeyer.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>